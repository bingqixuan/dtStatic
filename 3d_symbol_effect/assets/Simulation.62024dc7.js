import{_ as s}from"./index.0eaaf2ec.js";import{W as o,V as r,S as d}from"./cannon-es.2062a824.js";class n{constructor(t){this.app=t,this.items=[],this.init()}async init(){if(this.world=new o({gravity:new r(0,-9.82,0),broadphase:new d}),this.app.hasDebug){const{default:t}=await s(()=>import("./cannon-es-debugger.57efd5d6.js"),["cannon-es-debugger.57efd5d6.js","cannon-es.2062a824.js","index.0eaaf2ec.js","index.882014ce.css"],import.meta.url);this.debugger=new t(this.app.scene,this.world,{color:21760,onInit:(e,i)=>{window.addEventListener("togglePhysicsDebug",()=>{i.visible=!i.visible})}})}}addItem(t){this.items.push(t),this.world.addBody(t.body)}removeItem(t){setTimeout(()=>{this.items=this.items.filter(e=>e!==t),this.world.removeBody(t.body)},0)}update(){var t;this.world.fixedStep();for(const e of this.items)e.update();(t=this.debugger)==null||t.update()}}export{n as Simulation};
